"0","#expand covariates"
"0","mstate.data.expanded<-expand.covs(mstate.data,covs = names(mstate.data)[-(1:8)])[,-(9:length(mstate.data))]"
"0",""
"0","percentage_of_ones_fun<-function(x){"
"0","  sum(x)/length(x)"
"0","}"
"0","vars_to_exclude<-vector(""list"",3)"
"0","for(i in 1:3){"
"0","  string_split<-strsplit(names(mstate.data.expanded),""[.]"")"
"0","  var_indices<-sapply(string_split,function(x) x[length(x)]==as.character(i))"
"0","  dummy_dataset<-mstate.data.expanded[mstate.data.expanded$trans==i,var_indices]"
"0","  which_have_variance<-apply(dummy_dataset, 2, function(x) var(x)>0)"
"0","  vars_to_exclude[[i]]<-names(dummy_dataset)[!which_have_variance]"
"0","  dummy_dataset<-dummy_dataset[which_have_variance]"
"0","  non_categorical_vars<-paste0(c(""age_log"",""hb"",""anc_log"",""plt_log"",""bm_blasts_logit"",""ring_sideroblasts_logit"",""ipss"",""date""),paste0(""."",as.character(i)))"
"0","  percentage_of_ones<-apply(dummy_dataset[!names(dummy_dataset)%in%non_categorical_vars], 2, percentage_of_ones_fun)"
"0","which_less_than_five_percent<-which(percentage_of_ones<0.05)"
"0","vars_to_exclude[[i]]<-c(vars_to_exclude[[i]],names(percentage_of_ones)[which_less_than_five_percent])"
"0","}"
"0",""
"0",""
"0","fun2<-function(x){"
"0","  sapply(x,function(x){"
"0","      string_split<-unlist(strsplit(x,""[.]""))"
"0","  paste0(string_split[-length(string_split)],collapse = ""."")"
"0","  })"
"0",""
"0","}"
"0",""
"0","vars_to_exclude_primitive_names<-lapply(vars_to_exclude,fun2)"
"0",""
"0","#variables to exclude for transition 3 are a subset of those for transition 1 and 2"
"0","vars_to_exclude_primitive_names[[3]]%in%vars_to_exclude_primitive_names[[1]]"
"1"," [1]"
"1"," TRUE"
"1"," TRUE"
"1"," TRUE"
"1"," TRUE"
"1"," TRUE"
"1"," TRUE"
"1"," TRUE"
"1"," TRUE"
"1"," TRUE"
"1"," TRUE"
"1"," TRUE"
"1","
"
"1","[12]"
"1"," TRUE"
"1"," TRUE"
"1"," TRUE"
"1"," TRUE"
"1"," TRUE"
"1"," TRUE"
"1"," TRUE"
"1"," TRUE"
"1"," TRUE"
"1"," TRUE"
"1"," TRUE"
"1","
"
"1","[23]"
"1"," TRUE"
"1"," TRUE"
"1"," TRUE"
"1"," TRUE"
"1"," TRUE"
"1"," TRUE"
"1"," TRUE"
"1"," TRUE"
"1"," TRUE"
"1"," TRUE"
"1"," TRUE"
"1","
"
"1","[34]"
"1"," TRUE"
"1"," TRUE"
"1"," TRUE"
"1"," TRUE"
"1"," TRUE"
"1"," TRUE"
"1"," TRUE"
"1"," TRUE"
"1","
"
"0","#variables to exclude for transition 1 are the same as for transition 2"
"0","vars_to_exclude_primitive_names[[1]]==vars_to_exclude_primitive_names[[2]]"
"1","                     BRAF.1 "
"1","  who_simple_factor.MDS.U.1 "
"1","
"
"1","                       TRUE "
"1","                       TRUE "
"1","
"
"1","                     ATRX.1 "
"1","                     BCOR.1 "
"1","
"
"1","                       TRUE "
"1","                       TRUE "
"1","
"
"1","                      CBL.1 "
"1","                   CDKN2A.1 "
"1","
"
"1","                       TRUE "
"1","                       TRUE "
"1","
"
"1","                    CEBPA.1 "
"1","                   CREBBP.1 "
"1","
"
"1","                       TRUE "
"1","                       TRUE "
"1","
"
"1","                   CTNNA1.1 "
"1","                     CUX1.1 "
"1","
"
"1","                       TRUE "
"1","                       TRUE "
"1","
"
"1","                    EP300.1 "
"1","                     ETV6.1 "
"1","
"
"1","                       TRUE "
"1","                       TRUE "
"1","
"
"1","                     EZH2.1 "
"1","                     FLT3.1 "
"1","
"
"1","                       TRUE "
"1","                       TRUE "
"1","
"
"1","                    GATA2.1 "
"1","                     GNAS.1 "
"1","
"
"1","                       TRUE "
"1","                       TRUE "
"1","
"
"1","                     IDH1.1 "
"1","                     IDH2.1 "
"1","
"
"1","                       TRUE "
"1","                       TRUE "
"1","
"
"1","                     IRF1.1 "
"1","                     JAK2.1 "
"1","
"
"1","                       TRUE "
"1","                       TRUE "
"1","
"
"1","                    KDM6A.1 "
"1","                      KIT.1 "
"1","
"
"1","                       TRUE "
"1","                       TRUE "
"1","
"
"1","                     KRAS.1 "
"1","                     MLL2.1 "
"1","
"
"1","                       TRUE "
"1","                       TRUE "
"1","
"
"1","                      MPL.1 "
"1","                      NF1.1 "
"1","
"
"1","                       TRUE "
"1","                       TRUE "
"1","
"
"1","                     NPM1.1 "
"1","                     NRAS.1 "
"1","
"
"1","                       TRUE "
"1","                       TRUE "
"1","
"
"1","                     PHF6.1 "
"1","                     PTEN.1 "
"1","
"
"1","                       TRUE "
"1","                       TRUE "
"1","
"
"1","                   PTPN11.1 "
"1","                    RAD21.1 "
"1","
"
"1","                       TRUE "
"1","                       TRUE "
"1","
"
"1","                    SH2B3.1 "
"1","                    STAG2.1 "
"1","
"
"1","                       TRUE "
"1","                       TRUE "
"1","
"
"1","                      WT1.1 "
"1","                    ZRSR2.1 "
"1","
"
"1","                       TRUE "
"1","                       TRUE "
"1","
"
"1","                     chr3.1 "
"1","                  del7_7q.1 "
"1","
"
"1","                       TRUE "
"1","                       TRUE "
"1","
"
"1","                     tri8.1 "
"1","                    del11.1 "
"1","
"
"1","                       TRUE "
"1","                       TRUE "
"1","
"
"1","                    del12.1 "
"1","                   alt17q.1 "
"1","
"
"1","                       TRUE "
"1","                       TRUE "
"1","
"
"1","                    tri19.1 "
"1","                   del20q.1 "
"1","
"
"1","                       TRUE "
"1","                       TRUE "
"1","
"
"1","                     delY.1 "
"1"," who_simple_factor.RARS.T.1 "
"1","
"
"1","                       TRUE "
"1","                       TRUE "
"1","
"
"1","    who_simple_factor.5q..1 "
"1","who_simple_factor.MDS.MPN.1 "
"1","
"
"1","                       TRUE "
"1","                       TRUE "
"1","
"
"1","who_simple_factor.MDS.AML.1 "
"1","                 center.2.1 "
"1","
"
"1","                       TRUE "
"1","                       TRUE "
"1","
"
"1","                 center.5.1 "
"1","
"
"1","                       TRUE "
"1","
"
"0","#use vars_to_exclude[[1]] as the variables to exclude in all transitions"
"0","change_sufix_fun<-function(names_vector,new_sufix){"
"0","  sapply(names_vector,function(x){"
"0","      string_split<-unlist(strsplit(x,""[.]""))"
"0","  paste0(paste0(string_split[-length(string_split)],collapse = "".""),new_sufix)"
"0","  })"
"0",""
"0","}"
"0",""
"0","vars_to_exclude[[2]]<-change_sufix_fun(vars_to_exclude[[1]],"".2"")"
"0","vars_to_exclude[[3]]<-change_sufix_fun(vars_to_exclude[[1]],"".3"")"
"0",""
"0","mstate.data.expanded<-mstate.data.expanded[!names(mstate.data.expanded)%in%unlist(vars_to_exclude)]"
"0","save.image(""../data/MDS_R_objects.Rdata"")"
"0",""
