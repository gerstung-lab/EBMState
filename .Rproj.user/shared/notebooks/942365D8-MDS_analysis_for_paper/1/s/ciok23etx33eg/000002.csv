"0","mstate.data<-data.frame()"
"0",""
"0","for(i in 1:nrow(mdsClinicalData)){"
"0","  id<-rep(i,2)"
"0","  from<-c(1,1)"
"0","  to<-c(2,3)"
"0","  trans<-c(1,2)"
"0","  Tstart<-c(0,0)"
"0","  if(mdsClinicalData$AML.PROGRESSION[i]==1){"
"0","    Tstop<-rep(mdsClinicalData$DATE.AML.PROGRESSION[i]-mdsClinicalData$DATE.OF.DIAGNOSIS[i],2)"
"0","    time<-Tstop-Tstart"
"0","    status<-c(1,0)"
"0","    mstate.data<-rbind(mstate.data,data.frame(id=id,from=from,to=to,                                              trans=trans,Tstart=Tstart,Tstop=Tstop,time=time,status=status))"
"0","    if(mdsClinicalData$DATE.LAST.FU[i]>mdsClinicalData$DATE.AML.PROGRESSION[i]){"
"0","      id<-i"
"0","      from<-2"
"0","      to<-4"
"0","      trans<-3"
"0","      Tstart<-Tstop[1]"
"0","      Tstop<-mdsClinicalData$DATE.LAST.FU[i]-mdsClinicalData$DATE.OF.DIAGNOSIS[i]"
"0","      time<-Tstop-Tstart"
"0","      status<-mdsClinicalData$OUTCOME[i]"
"0","      mstate.data<-rbind(mstate.data,data.frame(id=id,from=from,to=to,trans=trans,"
"0","                                              Tstart=Tstart,Tstop=Tstop,time=time,status=status))"
"0","    }"
"0","    next "
"0","  }else{"
"0","    Tstop<-rep(mdsClinicalData$DATE.LAST.FU[i]-mdsClinicalData$DATE.OF.DIAGNOSIS[i],2)"
"0","    time<-Tstop-Tstart"
"0","    status<-c(0,mdsClinicalData$OUTCOME[i])"
"0","    mstate.data<-rbind(mstate.data,data.frame(id=id,from=from,to=to,"
"0","                             trans=trans,Tstart=Tstart,Tstop=Tstop,time=time,status=status))"
"0","  }"
"0","}"
"0",""
"0","#check that no rows have NA's"
"0","mstate.data[apply(mstate.data,1,function(x) sum(is.na(x))>0),]"
